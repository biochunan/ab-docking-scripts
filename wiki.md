
# abagdocking

#### common/dockingtools_lib.py

A library of tools frequently used by scripts in `ab-docking-scripts`.

#### common/split_abag_chains.py

This script was written to split an input antibody-antigen complex into its antibody and antigen components, randomly rotating and translating the antigen chain by up to 8 degrees and 3 angstroms. The script filters input files for the number of antigen chains present, skipping files that have no antigen or that have multiple antigen chains.

#### megadock/run_megadock_ranked.py

Script to run the Megadock docking program, followed by the ZRANK ranking program, available from (<https://www.bi.cs.titech.ac.jp/megadock/archives/megadock-4.1.1.tgz>) and (<https://zdock.umassmed.edu/software/download/>), respectively. This script takes up to 3 command line arguments:

- Path to the receptor (antibody) file
- Path to the ligand (antigen) file
- Output directory (optional)
The output is a single file with the suffix '_MegadockRanked_result.pdb'.

#### piper/run_piper.py

Script to run the PIPER docking program, available from (<https://cluspro.bu.edu/downloads.php>). This script calls on maskNIres.py to write a mask file of non-interface residues for input to PIPER which in turn calls on `findif.pl` to define interface residues. This script takes up to 4 command line arguments:

- Path to the original complex file
- Path to the receptor (antibody) file
- Path to the ligand (antigen) file
- Output directory (optional)
The output is a single file with the suffix '_Piper_result.pdb'.

#### haddock/run_haddock.py

Script to run the HADDOCK docking program, available from (<https://www.bonvinlab.org/software/haddock2.4/download/>). HADDOCK relies on the CNS program, available from (<http://cns-online.org/v1.3/>). This script takes up to 4 command line arguments:

- Path to the antibody file
- Path to the antigen file
- Length of docking run (long or short, default=short)
- Output directory (optional)
The output is two files with the suffixes '_Haddock_nowaters_result.pdb' and '_Haddock_waters_result.pdb'.

#### rosetta/run_rosetta.py

Script to run the RosettaDock docking program, available from (<https://www.rosettacommons.org/software/academic>). This script takes up to 5 command line arguments:

- Path to the original complex file
- Path to the antibody file
- Path to the antigen file
- Number of output structures (default=10)
- Output directory (optional)
The output is a single file with the suffix '_Rosetta_result.pdb'.

#### profit/run_profit_single.py

Script to evaluate the complexes predicted by docking programs using ProFit, available from (<http://www.bioinf.org.uk/software/profit/>). This script takes up to 3 command line arguments:

- Path to the original complex file
- Path to the predicted complex file
- Output directory (optional)
The output is two lines on the command line:
- 'All atoms RMSD:  '
- 'CA atoms RMSD:   '

#### utils/evaluate_interface.py

Script to evaluate the complexes predicted by docking programs by the proportion of correctly predicted interface residues. This script takes up to 3 command line arguments:

- Path to the original complex file
- Path to the predicted complex file
- Output directory (optional)
The output is five lines on the command line:
- 'Proportion of correctly predicted interface residues (0-1):'
- '============================================================'
- 'Correctly predicted residue pairs:       '
- 'Correctly predicted residues (antibody): '
- 'Correctly predicted residues (antigen):  '

#### test

Contains test files for some functions written in Python scripts.
A ReadMe file describing the contents and expected result for each test is provided.

#### test_docking_progs_master.py

Wrapper script to run the scripts described above, following the architecture shown above. This script takes up to 2 command line arguments:

- Path to the original complex file
- Output directory (optional)
The output includes multiple lines of code specifying what script is being run, that script's standard input/output, markers for the completion of a script, and multiple results files.

#### get_summary_results.py

Defunct script to extract summary results from result files generated by `test_docking_progs_master.py`.

Replaced with `extract_results.py`.

#### run_test_docking_progs_master.sh

Wrapper script calling the `test_docking_progs_master.py` script and the `get_summary_results.py` script. (N.b. getsummaryresults.py did not work as intended and was replaced with the extract_results.py script, though it is still called by this wrapper).

## reproduce data

calling piper

```shell
python script.py config.yml
```

## config yaml setup

```yaml
executable:
  megadock: """
```

- `megadock`: path to megadock binary executable
